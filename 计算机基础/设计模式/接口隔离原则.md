# 接口隔离原则

什么是接口隔离？
* 业务方不应该依赖它不需要的接口：业务方需要什么接口就提供什么接口，把不需要的接口剔除掉，保证其纯洁性；
* 类间的依赖关系应该建立在最小的接口上：要求最小的接口，也就是接口纯洁性；

简而言之，接口隔离原则就是 __建立单一接口，不要建立臃肿庞大的接口__！从审视角度而言，这里的单一，与单一职责原则是不相同的：
* 单一职责原则要求类、接口、方法的职责单一，注重的是职责，这是业务逻辑上的粒度划分；
* 接口隔离原则要求接口尽可能的少；

例如一个接口的职责包含十个方法，分别提供给多个业务方使用；各个业务方通过文档约束 _不使用的方法不要访问_；从单一职责原则的角度而言它是允许的，但从接口隔离原则而言是不被允许的，因为它要求 _尽量使用多个专门的接口_。

专门的接口，就是提供给业务方的接口单一，有几个业务方就提供几个接口！而不是将所有的业务放在一个一起，建立一个臃肿庞大的接口，供各个业务方使用！

接口是我们设计时，对外提供的契约，通过分散定义接口，可以预防未来变更的扩散，提高系统的灵活性和可扩展性！

### 保证接口的纯洁性

接口隔离原则，就是对接口进行规范约束：

* __接口要尽量小__：根据接口隔离原则拆分接口时，首先 __必须满足单一职责原则__；

这是接口隔离原则的核心定义，不要出现臃肿的接口！但这个小是有限度的，不能违反单一职责原则；业务逻辑角度的最小粒度，不应该再被拆分！

* __接口内高内聚__

什么是高内聚？高内聚就是提高类、接口、模块的处理能力，减少对外的交互；接口应该尽量少的公布 `public` 方法！
接口是对外的承诺，承诺越少对系统的开发越有利，变更的风险也就越少，同时也有利于降低成本！

* __定制服务__

一个系统的模块之间必然有耦合，有耦合就要有相互访问的接口，在设计时需要为各个业务方定制服务！定制服务就是为每个业务方提供它们只需要的方法！

如查询服务：
* 业务方甲只需要查询其名字，但查询次数频繁；
* 业务方乙需要查询名字、住址、电话、甚至其关联的其它信息，虽然查询数据庞大，但查询次数少；
* 如果只提供一个接口，显然这个接口要满足业务方甲、乙的需求；那么可能造成性能、资源的浪费，效率的降低，因为甲方不需要查询那么多信息，导致性能的下降！

* __接口设计是有限度的__

接口设计的粒度越小，系统越灵活！但灵活的同时，也增加了其复杂性，开发难度增大，可维护性降低！所以接口设计要把握一个度，这个度如何把握存乎一心！

### 衡量标准

接口隔离原则是对接口的定义，同时也是对类的定义，接口和类尽量使用原子接口或原子类来组装！在实践中可以根据以下几个规则来划分原子性：

* 一个接口只服务于一个子模块或业务逻辑
* 通过业务逻辑压缩接口中的 `public` 方法，接口时常去回顾，尽量让接口达到满身筋骨肉，而不是肥嘟嘟；
* 已经被污染的接口，尽量去修改；若变更风险较大，则采用适配器模式去转化处理；
* 了解环境、拒绝盲从；
